{"version":3,"file":"order.js","sources":["src/js/form/utils.js","src/js/config/index.js","src/js/order/form-structure.js","src/js/form/persistance.js","src/js/order.js","src/js/order/suggestion.js","src/js/order/required.js","src/js/order/make-json.js"],"sourcesContent":["export const cleanForm = (form) => {\n  const namedElements = form.querySelectorAll(\"[name]\");\n  namedElements.forEach((element) => {\n    if (element.matches(\"input[type=radio], input[type=checkbox]\")) {\n      element.checked = false;\n      return;\n    }\n\n    element.value = \"\";\n  });\n  form.dispatchEvent(new Event(\"change\"));\n};\n\nexport const saveForm = (form) => {\n  const data = formSerialize(form);\n  const formName = form.getAttribute(\"name\");\n  localStorage.setItem(`form[name=${formName}]`, JSON.stringify(data));\n};\n\nexport const restoreSavedForm = (form) => {\n  const formName = form.getAttribute(\"name\");\n  const savedForm = localStorage.getItem(`form[name=${formName}]`);\n  if (savedForm) {\n    const data = JSON.parse(savedForm);\n    formDeserialize(form, data);\n  }\n\n  form.dispatchEvent(new Event(\"change\"));\n};\n\nexport const formSerialize = (form) => {\n  const formData = new FormData(form);\n\n  // CAVEAT it doesn't work with elements with multiple values\n  return Object.fromEntries(\n    [...formData.entries()].filter(([key, value]) => value !== \"\")\n  );\n};\n\nconst makeElementsMap = (form) => {\n  const namedElements = [...form.querySelectorAll(\"[name]\")];\n  return namedElements\n    .map((el) => [el.getAttribute(\"name\"), el])\n    .reduce((acc, [key, value]) => {\n      if (key in acc) {\n        const prevValue = acc[key];\n        if (Array.isArray(prevValue)) {\n          prevValue.push(value);\n          return acc;\n        }\n\n        acc[key] = [prevValue, value];\n        return acc;\n      }\n\n      acc[key] = value;\n      return acc;\n    }, Object.create(null));\n};\n\nconst deserializeElement = (element, key, value) => {\n  if (element.getAttribute(\"name\") !== key) throw Error();\n\n  if (element.matches(\"input[type=radio], input[type=checkbox]\")) {\n    if (element.getAttribute(\"value\") === value) {\n      element.checked = true;\n    }\n    return;\n  }\n\n  element.value = value;\n};\n\nexport const formDeserialize = (form, data) => {\n  // CAVEAT it doesn't work with elements with multiple values\n\n  const elementsMap = makeElementsMap(form);\n  cleanForm(form);\n\n  if (!data) return;\n\n  Object.entries(data).forEach(([key, value]) => {\n    // FIXME implement processing elements with multiple values\n    if (Array.isArray(value)) throw Error();\n\n    const element = elementsMap[key];\n    if (!element) return;\n\n    if (Array.isArray(element)) {\n      element.forEach((el) => deserializeElement(el, key, value));\n      return;\n    }\n\n    deserializeElement(element, key, value);\n  });\n};\n\n// Сохранение данных формы при перезагрузке страницы\n// https://blog.lisogorsky.ru/session-storage-save-data\n// https://github.com/FThompson/FormPersistence.js\n","export const suggestionToken = \"e4c13b47d64f3864376e4c6dafb753bf619f08bb\";\n","export const setPayerVisibility = (form) => {\n  const data = new FormData(form);\n\n  [\"consigner\", \"consignee\"].forEach((role) => {\n    const rolePayingContactElement = form.querySelector(\n      `.${role}-paying-contact`\n    );\n\n    const roleType = data.get(`${role}-type`);\n    const roleIsPayer = data.get(`${role}-is-payer`) === `${role}-is-payer`;\n    const rolePayingContactEnabled = roleIsPayer && roleType === \"legal-entity\";\n    rolePayingContactElement.hidden = !rolePayingContactEnabled;\n  });\n\n  const consignerIsPayer =\n    data.get(\"consigner-is-payer\") === \"consigner-is-payer\";\n  const consigneeIsPayer =\n    data.get(\"consignee-is-payer\") === \"consignee-is-payer\";\n\n  const payerElement = form.querySelector(\".section-payer\");\n  payerElement.hidden = consignerIsPayer || consigneeIsPayer;\n};\n\nconst setCounterpartyRoleStructure = (form, role) => {\n  const data = new FormData(form);\n\n  const legalEntityGroupElement = form.querySelector(\n    `.group-${role}-legal-entity`\n  );\n  const privatePersonGroupElement = form.querySelector(\n    `.group-${role}-private-person`\n  );\n\n  const type = data.get(`${role}-type`);\n\n  legalEntityGroupElement.hidden = type !== \"legal-entity\";\n  privatePersonGroupElement.hidden = type !== \"private-person\";\n};\n\nexport const setCounterpartyStructure = (form) => {\n  setCounterpartyRoleStructure(form, \"consigner\");\n  setCounterpartyRoleStructure(form, \"consignee\");\n  setCounterpartyRoleStructure(form, \"payer\");\n};\n\n// Управление видимостью полей в разделах погрузки/выгрузки\nconst setCargoOperationStructure = (form, operation) => {\n  const terminals = window.terminals;\n  const places = window.places;\n\n  const formData = new FormData(form);\n\n  const operationPlace = formData.get(`${operation}-place`);\n  const operationPoint = formData.get(`${operation}-point`);\n  const address = formData.get(`${operation}-point-client-address`).trim();\n  const addressElement = form.elements[`${operation}-point-client-address`];\n\n  let terminalTitle = `Терминал перевозчика`;\n\n  const operationPointTerminalControlElement = form.querySelector(\n    `.${operation}-terminal-control`\n  );\n  const operationPointClientControlElement = form.querySelector(\n    `.${operation}-client-control`\n  );\n  const operationPointPickupControlElement = form.querySelector(\n    `.${operation}-pickup-control`\n  );\n\n  const operationPointTerminalTitleElement = form.querySelector(\n    `.${operation}-point-terminal-title`\n  );\n\n  const operationPointClientAddressGroupElement = form.querySelector(\n    `.group-${operation}-point-client-address`\n  );\n\n  operationPointClientAddressGroupElement.hidden =\n    !operationPoint || operationPoint === `${operation}-point-terminal`;\n\n  if (!operationPlace) {\n    // Не выбран город\n    operationPointTerminalControlElement.hidden = false;\n    operationPointClientControlElement.hidden = false;\n    operationPointPickupControlElement.hidden = false;\n  } else if (operationPlace in terminals) {\n    // Выбран город из списка\n    operationPointTerminalControlElement.hidden = false;\n    operationPointClientControlElement.hidden = false;\n    operationPointPickupControlElement.hidden = true;\n\n    terminalTitle = `Терминал перевозчика: ${window.terminals[operationPlace]}`;\n\n    if (address === \"\" || Object.values(places).includes(address)) {\n      addressElement.value = places[operationPlace] + \" \";\n    }\n  } else {\n    // Выбран другой город\n    operationPointTerminalControlElement.hidden = true;\n    operationPointClientControlElement.hidden = true;\n    operationPointPickupControlElement.hidden = false;\n  }\n\n  operationPointTerminalTitleElement.textContent = terminalTitle;\n};\n\nexport const setCargoOperationsStructure = (form) => {\n  setCargoOperationStructure(form, \"loading\");\n  setCargoOperationStructure(form, \"unloading\");\n};\n","import {formSerialize, formDeserialize} from \"./utils\";\nconst eventListeners = [];\n\nexport const enablePersistance = (form) => {\n  const formName = form.getAttribute(\"name\");\n  const eventListenersObject = eventListeners.find((el) => el.form === form);\n  if (eventListenersObject) throw Error(`Persistance already enabled for form`);\n\n  const handleFormChange = () => {\n    const data = formSerialize(form);\n    sessionStorage.setItem(`form[name=${formName}]`, JSON.stringify(data));\n  };\n  const handleDOMContentLoaded = () => {\n    const data = JSON.parse(sessionStorage.getItem(`form[name=${formName}]`));\n    formDeserialize(form, data);\n\n    form.dispatchEvent(new Event(\"change\"));\n  };\n\n  eventListeners.push({form, handleFormChange, handleDOMContentLoaded});\n\n  form.addEventListener(\"change\", handleFormChange);\n  document.addEventListener(\"DOMContentLoaded\", handleDOMContentLoaded);\n};\n\nexport const disablePersistance = (form) => {\n  const eventListenersObject = eventListeners.find((el) => el.form === form);\n  if (!eventListenersObject)\n    throw Error(`Persistance already disabled for form`);\n\n  form.removeEventListener(\"change\", eventListenersObject.handleFormChange);\n  document.removeEventListener(\n    \"DOMContentLoaded\",\n    eventListenersObject.handleDOMContentLoaded\n  );\n};\n","import {cleanForm, saveForm, restoreSavedForm} from \"./form/utils\";\nimport setSuggestions from \"./order/suggestion\";\nimport makeOrderJSON from \"./order/make-json\";\nimport setRequiredAttributes from \"./order/required\";\nimport {\n  setPayerVisibility,\n  setCounterpartyStructure,\n  setCargoOperationsStructure\n} from \"./order/form-structure\";\nimport {enablePersistance} from \"./form/persistance.js\";\n\nconst form = document.forms.order;\nenablePersistance(form);\nsetSuggestions(form);\n\nconst consignerIsPayerElement = form.elements[\"consigner-is-payer\"];\nconst consigneeIsPayerElement = form.elements[\"consignee-is-payer\"];\n\nconst handleIsPayerCheckboxChange = (event) => {\n  if (!event) return;\n\n  if (\n    event.target === consignerIsPayerElement &&\n    consignerIsPayerElement.checked\n  ) {\n    consigneeIsPayerElement.checked = false;\n  }\n  if (\n    event.target === consigneeIsPayerElement &&\n    consigneeIsPayerElement.checked\n  ) {\n    consignerIsPayerElement.checked = false;\n  }\n};\n\nconst handleFormChange = (event) => {\n  handleIsPayerCheckboxChange(event);\n\n  setCounterpartyStructure(form);\n  setPayerVisibility(form);\n  setCargoOperationsStructure(form);\n  setRequiredAttributes(form);\n};\n\nform.addEventListener(\"change\", handleFormChange);\n\nlet isSubmiting = false;\nform.addEventListener(\"submit\", (event) => {\n  event.preventDefault();\n  if (isSubmiting) return;\n  isSubmiting = true;\n\n  const buttonSubmit = form.querySelector(\"button[type=submit]\");\n  buttonSubmit.classList.add(\"button--submiting\");\n\n  saveForm(form);\n\n  const json = makeOrderJSON(form);\n\n  const dataToSend = new FormData();\n  dataToSend.append(\"data\", JSON.stringify(json));\n\n  const errorGroupElement = form\n    .querySelector(\"button[type=submit]\")\n    .closest(\".control-group\");\n  errorGroupElement.classList.remove(\"control-group--error\");\n\n  // TODO timeout for fetch\n  fetch(\"php/mailer/send.php\", {\n    method: \"POST\",\n    body: dataToSend\n  })\n    .then(function (res) {\n      if (!res.ok)\n        throw Error(\n          \"При отправке заявки возникла ошибка, заявка не отправлена.\"\n        );\n      return res.json();\n    })\n    .then(function (data) {\n      console.log(data);\n      if (data.result !== \"success\")\n        throw Error(\n          \"При отправке заявки возникла ошибка почтового сервера, заявка не отправлена.\"\n        );\n\n      cleanForm(form);\n      window.location.assign(\"order-ok.html\");\n    })\n    .catch((err) => {\n      console.error(err.message);\n      errorGroupElement.classList.add(\"control-group--error\");\n    })\n    .finally(() => {\n      buttonSubmit.classList.remove(\"button--submiting\");\n      isSubmiting = false;\n    });\n\n  // const content = dialog.$el.querySelector(\".dialog-content__data\");\n  // window.dialog.show();\n});\n\nconst cleanFormElement = form.querySelector(\".suggest-helper--clean-form\");\ncleanFormElement.addEventListener(\"click\", () => {\n  cleanForm(form);\n});\n\nconst fillFormElement = form.querySelector(\".suggest-helper--fill-form\");\nfillFormElement.addEventListener(\"click\", () => restoreSavedForm(form));\n","import {suggestionToken} from \"../config\";\n\nexport default function setSuggestions(form) {\n  const suggestionElements = form.querySelectorAll(\"[data-suggestion-type]\");\n  suggestionElements.forEach((el) => {\n    const type = {\n      address: \"ADDRESS\",\n      name: \"NAME\",\n      email: \"EMAIL\"\n    }[el.dataset.suggestionType];\n\n    if (!type) throw Error();\n\n    // eslint-disable-next-line no-undef\n    $(el).suggestions({token: suggestionToken, type});\n    // TODO адрес без области и района https://codepen.io/dadata/pen/qdwPdZ\n  });\n\n  const setHandlers = (counterpartyRole) => {\n    const counterpartyElement = form.elements[`${counterpartyRole}`];\n\n    // eslint-disable-next-line no-undef\n    $(counterpartyElement).suggestions({\n      token: suggestionToken,\n      type: \"PARTY\",\n      onSelect: function (suggestion) {\n        const OGRNElement = form.elements[`${counterpartyRole}-OGRN`];\n        const INNElement = form.elements[`${counterpartyRole}-INN`];\n        const KPPElement = form.elements[`${counterpartyRole}-KPP`];\n        const addressElement = form.elements[`${counterpartyRole}-address`];\n\n        console.log(suggestion);\n\n        const address = suggestion.data.address.value;\n\n        if (suggestion.data.type === \"INDIVIDUAL\") {\n          OGRNElement.value = suggestion.data.ogrn;\n          INNElement.value = suggestion.data.inn;\n          KPPElement.value = \"\";\n          addressElement.value = address;\n        }\n\n        if (suggestion.data.type === \"LEGAL\") {\n          OGRNElement.value = suggestion.data.ogrn;\n          INNElement.value = suggestion.data.inn;\n          KPPElement.value = suggestion.data.kpp;\n          addressElement.value = address;\n        }\n      }\n    });\n  };\n\n  setHandlers(\"consigner\");\n  setHandlers(\"consignee\");\n  setHandlers(\"payer\");\n}\n","export default (form) => {\n  const controlsRequired = form.querySelectorAll(\".control--required\");\n\n  controlsRequired.forEach((el) => {\n    const uiElement = el.querySelector(\"input, textarea, select\");\n    if (uiElement.matches(\"[hidden] *\")) {\n      uiElement.removeAttribute(\"required\");\n      return;\n    }\n    uiElement.setAttribute(\"required\", \"\");\n  });\n};\n","export default (form) => {\n  const data = new FormData(form);\n  const order = Object.create(null);\n  const places = window.places;\n\n  const cargo = Object.create(null);\n  Object.entries({\n    name: \"cargo\",\n    weight: \"cargo-weight\",\n    volume: \"cargo-volume\",\n    qty: \"cargo-qty\",\n    condition: \"cargo-condition\",\n    value: \"cargo-value\",\n    insurance: \"insurance\"\n  }).forEach(([key, value]) => {\n    cargo[key] = data.get(value);\n  });\n  order.cargo = cargo;\n\n  [\"consigner\", \"consignee\", \"payer\"].forEach((role) => {\n    if (\n      role === \"payer\" &&\n      (Boolean(data.get(\"consigner-is-payer\")) ||\n        Boolean(data.get(\"consignee-is-payer\")))\n    )\n      return;\n\n    const counterAgent = Object.create(null);\n    const counterAgentType = data.get(`${role}-type`);\n    counterAgent.type = counterAgentType;\n    if (counterAgentType === \"legal-entity\") {\n      Object.entries({\n        name: `${role}`,\n        INN: `${role}-INN`,\n        KPP: `${role}-KPP`,\n        OGRN: `${role}-OGRN`,\n        address: `${role}-address`,\n        cargoContactTel: `${role}-cargo-contact-tel`,\n        cargoContactFio: `${role}-cargo-contact-fio`,\n        payingContactTel: `${role}-paying-contact-tel`,\n        payingContactFio: `${role}-paying-contact-fio`\n      }).forEach(([key, value]) => {\n        if (\n          role === \"payer\" &&\n          (key === \"cargoContactTel\" || key === \"cargoContactFio\")\n        )\n          return;\n\n        counterAgent[key] = data.get(value);\n      });\n    }\n    if (counterAgentType === \"private-person\") {\n      Object.entries({\n        name: `${role}-fio`,\n        tel: `${role}-tel`\n      }).forEach(([key, value]) => {\n        counterAgent[key] = data.get(value);\n      });\n    }\n\n    if ([\"consigner\", \"consignee\"].includes(role)) {\n      counterAgent.isPayer = Boolean(data.get(`${role}-is-payer`));\n    }\n\n    order[role] = counterAgent;\n  });\n\n  [\"loading\", \"unloading\"].forEach((operation) => {\n    const operationObject = Object.create(null);\n    Object.entries({\n      date: `${operation}-date`,\n      time: `${operation}-time`,\n      place: `${operation}-place`,\n      point: `${operation}-point`,\n      pointClientAddress: `${operation}-point-client-address`\n    }).forEach(([key, value]) => {\n      if (key === \"place\") {\n        operationObject[key] = places[data.get(value)] ?? \"\";\n        return;\n      }\n\n      operationObject[key] = data.get(value);\n    });\n    order[operation] = operationObject;\n  });\n\n  order.paymentForm = data.get(\"payment-form\");\n  order.memo = data.get(\"memo\");\n\n  const author = Object.create(null);\n  [\"fio\", \"tel\", \"email\"].forEach((key) => {\n    author[key] = data.get(`order-author-${key}`);\n  });\n  order.author = author;\n\n  return order;\n};\n"],"names":["cleanForm","form","querySelectorAll","forEach","element","matches","checked","value","dispatchEvent","Event","formSerialize","formData","FormData","Object","fromEntries","entries","filter","key","deserializeElement","getAttribute","Error","formDeserialize","data","elementsMap","map","el","reduce","acc","prevValue","Array","isArray","push","create","makeElementsMap","suggestionToken","setCounterpartyRoleStructure","role","legalEntityGroupElement","querySelector","privatePersonGroupElement","type","get","hidden","setCargoOperationStructure","operation","terminals","window","places","operationPlace","operationPoint","address","trim","addressElement","elements","terminalTitle","operationPointTerminalControlElement","operationPointClientControlElement","operationPointPickupControlElement","operationPointTerminalTitleElement","values","includes","textContent","eventListeners","document","forms","order","formName","find","handleFormChange","sessionStorage","setItem","JSON","stringify","handleDOMContentLoaded","parse","getItem","addEventListener","enablePersistance","name","email","dataset","suggestionType","$","suggestions","token","setHandlers","counterpartyRole","counterpartyElement","onSelect","suggestion","OGRNElement","INNElement","KPPElement","console","log","ogrn","inn","kpp","setSuggestions","consignerIsPayerElement","consigneeIsPayerElement","event","target","handleIsPayerCheckboxChange","setCounterpartyStructure","rolePayingContactElement","roleType","rolePayingContactEnabled","consignerIsPayer","consigneeIsPayer","setPayerVisibility","setCargoOperationsStructure","uiElement","removeAttribute","setAttribute","setRequiredAttributes","isSubmiting","preventDefault","buttonSubmit","classList","add","localStorage","saveForm","json","cargo","weight","volume","qty","condition","insurance","Boolean","counterAgent","counterAgentType","INN","KPP","OGRN","cargoContactTel","cargoContactFio","payingContactTel","payingContactFio","tel","isPayer","operationObject","date","time","place","point","pointClientAddress","paymentForm","memo","author","makeOrderJSON","dataToSend","append","errorGroupElement","closest","remove","fetch","method","body","then","res","ok","result","location","assign","catch","err","error","message","finally","savedForm","restoreSavedForm"],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3JkZXIuanMiLCJzb3VyY2VzIjpbInNyYy9qcy9mb3JtL3V0aWxzLmpzIiwic3JjL2pzL2NvbmZpZy9pbmRleC5qcyIsInNyYy9qcy9vcmRlci9mb3JtLXN0cnVjdHVyZS5qcyIsInNyYy9qcy9mb3JtL3BlcnNpc3RhbmNlLmpzIiwic3JjL2pzL29yZGVyLmpzIiwic3JjL2pzL29yZGVyL3N1Z2dlc3Rpb24uanMiLCJzcmMvanMvb3JkZXIvcmVxdWlyZWQuanMiLCJzcmMvanMvb3JkZXIvbWFrZS1qc29uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBjbGVhbkZvcm0gPSAoZm9ybSkgPT4ge1xuICBjb25zdCBuYW1lZEVsZW1lbnRzID0gZm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWVdXCIpO1xuICBuYW1lZEVsZW1lbnRzLmZvckVhY2goKGVsZW1lbnQpID0+IHtcbiAgICBpZiAoZWxlbWVudC5tYXRjaGVzKFwiaW5wdXRbdHlwZT1yYWRpb10sIGlucHV0W3R5cGU9Y2hlY2tib3hdXCIpKSB7XG4gICAgICBlbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlbGVtZW50LnZhbHVlID0gXCJcIjtcbiAgfSk7XG4gIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNhdmVGb3JtID0gKGZvcm0pID0+IHtcbiAgY29uc3QgZGF0YSA9IGZvcm1TZXJpYWxpemUoZm9ybSk7XG4gIGNvbnN0IGZvcm1OYW1lID0gZm9ybS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xuICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShgZm9ybVtuYW1lPSR7Zm9ybU5hbWV9XWAsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXN0b3JlU2F2ZWRGb3JtID0gKGZvcm0pID0+IHtcbiAgY29uc3QgZm9ybU5hbWUgPSBmb3JtLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7XG4gIGNvbnN0IHNhdmVkRm9ybSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGBmb3JtW25hbWU9JHtmb3JtTmFtZX1dYCk7XG4gIGlmIChzYXZlZEZvcm0pIHtcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzYXZlZEZvcm0pO1xuICAgIGZvcm1EZXNlcmlhbGl6ZShmb3JtLCBkYXRhKTtcbiAgfVxuXG4gIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1TZXJpYWxpemUgPSAoZm9ybSkgPT4ge1xuICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcblxuICAvLyBDQVZFQVQgaXQgZG9lc24ndCB3b3JrIHdpdGggZWxlbWVudHMgd2l0aCBtdWx0aXBsZSB2YWx1ZXNcbiAgcmV0dXJuIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBbLi4uZm9ybURhdGEuZW50cmllcygpXS5maWx0ZXIoKFtrZXksIHZhbHVlXSkgPT4gdmFsdWUgIT09IFwiXCIpXG4gICk7XG59O1xuXG5jb25zdCBtYWtlRWxlbWVudHNNYXAgPSAoZm9ybSkgPT4ge1xuICBjb25zdCBuYW1lZEVsZW1lbnRzID0gWy4uLmZvcm0ucXVlcnlTZWxlY3RvckFsbChcIltuYW1lXVwiKV07XG4gIHJldHVybiBuYW1lZEVsZW1lbnRzXG4gICAgLm1hcCgoZWwpID0+IFtlbC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLCBlbF0pXG4gICAgLnJlZHVjZSgoYWNjLCBba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmIChrZXkgaW4gYWNjKSB7XG4gICAgICAgIGNvbnN0IHByZXZWYWx1ZSA9IGFjY1trZXldO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcmV2VmFsdWUpKSB7XG4gICAgICAgICAgcHJldlZhbHVlLnB1c2godmFsdWUpO1xuICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH1cblxuICAgICAgICBhY2Nba2V5XSA9IFtwcmV2VmFsdWUsIHZhbHVlXTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH1cblxuICAgICAgYWNjW2tleV0gPSB2YWx1ZTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwgT2JqZWN0LmNyZWF0ZShudWxsKSk7XG59O1xuXG5jb25zdCBkZXNlcmlhbGl6ZUVsZW1lbnQgPSAoZWxlbWVudCwga2V5LCB2YWx1ZSkgPT4ge1xuICBpZiAoZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpICE9PSBrZXkpIHRocm93IEVycm9yKCk7XG5cbiAgaWYgKGVsZW1lbnQubWF0Y2hlcyhcImlucHV0W3R5cGU9cmFkaW9dLCBpbnB1dFt0eXBlPWNoZWNrYm94XVwiKSkge1xuICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcInZhbHVlXCIpID09PSB2YWx1ZSkge1xuICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZWxlbWVudC52YWx1ZSA9IHZhbHVlO1xufTtcblxuZXhwb3J0IGNvbnN0IGZvcm1EZXNlcmlhbGl6ZSA9IChmb3JtLCBkYXRhKSA9PiB7XG4gIC8vIENBVkVBVCBpdCBkb2Vzbid0IHdvcmsgd2l0aCBlbGVtZW50cyB3aXRoIG11bHRpcGxlIHZhbHVlc1xuXG4gIGNvbnN0IGVsZW1lbnRzTWFwID0gbWFrZUVsZW1lbnRzTWFwKGZvcm0pO1xuICBjbGVhbkZvcm0oZm9ybSk7XG5cbiAgaWYgKCFkYXRhKSByZXR1cm47XG5cbiAgT2JqZWN0LmVudHJpZXMoZGF0YSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgLy8gRklYTUUgaW1wbGVtZW50IHByb2Nlc3NpbmcgZWxlbWVudHMgd2l0aCBtdWx0aXBsZSB2YWx1ZXNcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHRocm93IEVycm9yKCk7XG5cbiAgICBjb25zdCBlbGVtZW50ID0gZWxlbWVudHNNYXBba2V5XTtcbiAgICBpZiAoIWVsZW1lbnQpIHJldHVybjtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnQpKSB7XG4gICAgICBlbGVtZW50LmZvckVhY2goKGVsKSA9PiBkZXNlcmlhbGl6ZUVsZW1lbnQoZWwsIGtleSwgdmFsdWUpKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBkZXNlcmlhbGl6ZUVsZW1lbnQoZWxlbWVudCwga2V5LCB2YWx1ZSk7XG4gIH0pO1xufTtcblxuLy8g0KHQvtGF0YDQsNC90LXQvdC40LUg0LTQsNC90L3Ri9GFINGE0L7RgNC80Ysg0L/RgNC4INC/0LXRgNC10LfQsNCz0YDRg9C30LrQtSDRgdGC0YDQsNC90LjRhtGLXG4vLyBodHRwczovL2Jsb2cubGlzb2dvcnNreS5ydS9zZXNzaW9uLXN0b3JhZ2Utc2F2ZS1kYXRhXG4vLyBodHRwczovL2dpdGh1Yi5jb20vRlRob21wc29uL0Zvcm1QZXJzaXN0ZW5jZS5qc1xuIiwiZXhwb3J0IGNvbnN0IHN1Z2dlc3Rpb25Ub2tlbiA9IFwiZTRjMTNiNDdkNjRmMzg2NDM3NmU0YzZkYWZiNzUzYmY2MTlmMDhiYlwiO1xuIiwiZXhwb3J0IGNvbnN0IHNldFBheWVyVmlzaWJpbGl0eSA9IChmb3JtKSA9PiB7XG4gIGNvbnN0IGRhdGEgPSBuZXcgRm9ybURhdGEoZm9ybSk7XG5cbiAgW1wiY29uc2lnbmVyXCIsIFwiY29uc2lnbmVlXCJdLmZvckVhY2goKHJvbGUpID0+IHtcbiAgICBjb25zdCByb2xlUGF5aW5nQ29udGFjdEVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLiR7cm9sZX0tcGF5aW5nLWNvbnRhY3RgXG4gICAgKTtcblxuICAgIGNvbnN0IHJvbGVUeXBlID0gZGF0YS5nZXQoYCR7cm9sZX0tdHlwZWApO1xuICAgIGNvbnN0IHJvbGVJc1BheWVyID0gZGF0YS5nZXQoYCR7cm9sZX0taXMtcGF5ZXJgKSA9PT0gYCR7cm9sZX0taXMtcGF5ZXJgO1xuICAgIGNvbnN0IHJvbGVQYXlpbmdDb250YWN0RW5hYmxlZCA9IHJvbGVJc1BheWVyICYmIHJvbGVUeXBlID09PSBcImxlZ2FsLWVudGl0eVwiO1xuICAgIHJvbGVQYXlpbmdDb250YWN0RWxlbWVudC5oaWRkZW4gPSAhcm9sZVBheWluZ0NvbnRhY3RFbmFibGVkO1xuICB9KTtcblxuICBjb25zdCBjb25zaWduZXJJc1BheWVyID1cbiAgICBkYXRhLmdldChcImNvbnNpZ25lci1pcy1wYXllclwiKSA9PT0gXCJjb25zaWduZXItaXMtcGF5ZXJcIjtcbiAgY29uc3QgY29uc2lnbmVlSXNQYXllciA9XG4gICAgZGF0YS5nZXQoXCJjb25zaWduZWUtaXMtcGF5ZXJcIikgPT09IFwiY29uc2lnbmVlLWlzLXBheWVyXCI7XG5cbiAgY29uc3QgcGF5ZXJFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnNlY3Rpb24tcGF5ZXJcIik7XG4gIHBheWVyRWxlbWVudC5oaWRkZW4gPSBjb25zaWduZXJJc1BheWVyIHx8IGNvbnNpZ25lZUlzUGF5ZXI7XG59O1xuXG5jb25zdCBzZXRDb3VudGVycGFydHlSb2xlU3RydWN0dXJlID0gKGZvcm0sIHJvbGUpID0+IHtcbiAgY29uc3QgZGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtKTtcblxuICBjb25zdCBsZWdhbEVudGl0eUdyb3VwRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICBgLmdyb3VwLSR7cm9sZX0tbGVnYWwtZW50aXR5YFxuICApO1xuICBjb25zdCBwcml2YXRlUGVyc29uR3JvdXBFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgIGAuZ3JvdXAtJHtyb2xlfS1wcml2YXRlLXBlcnNvbmBcbiAgKTtcblxuICBjb25zdCB0eXBlID0gZGF0YS5nZXQoYCR7cm9sZX0tdHlwZWApO1xuXG4gIGxlZ2FsRW50aXR5R3JvdXBFbGVtZW50LmhpZGRlbiA9IHR5cGUgIT09IFwibGVnYWwtZW50aXR5XCI7XG4gIHByaXZhdGVQZXJzb25Hcm91cEVsZW1lbnQuaGlkZGVuID0gdHlwZSAhPT0gXCJwcml2YXRlLXBlcnNvblwiO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldENvdW50ZXJwYXJ0eVN0cnVjdHVyZSA9IChmb3JtKSA9PiB7XG4gIHNldENvdW50ZXJwYXJ0eVJvbGVTdHJ1Y3R1cmUoZm9ybSwgXCJjb25zaWduZXJcIik7XG4gIHNldENvdW50ZXJwYXJ0eVJvbGVTdHJ1Y3R1cmUoZm9ybSwgXCJjb25zaWduZWVcIik7XG4gIHNldENvdW50ZXJwYXJ0eVJvbGVTdHJ1Y3R1cmUoZm9ybSwgXCJwYXllclwiKTtcbn07XG5cbi8vINCj0L/RgNCw0LLQu9C10L3QuNC1INCy0LjQtNC40LzQvtGB0YLRjNGOINC/0L7Qu9C10Lkg0LIg0YDQsNC30LTQtdC70LDRhSDQv9C+0LPRgNGD0LfQutC4L9Cy0YvQs9GA0YPQt9C60LhcbmNvbnN0IHNldENhcmdvT3BlcmF0aW9uU3RydWN0dXJlID0gKGZvcm0sIG9wZXJhdGlvbikgPT4ge1xuICBjb25zdCB0ZXJtaW5hbHMgPSB3aW5kb3cudGVybWluYWxzO1xuICBjb25zdCBwbGFjZXMgPSB3aW5kb3cucGxhY2VzO1xuXG4gIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xuXG4gIGNvbnN0IG9wZXJhdGlvblBsYWNlID0gZm9ybURhdGEuZ2V0KGAke29wZXJhdGlvbn0tcGxhY2VgKTtcbiAgY29uc3Qgb3BlcmF0aW9uUG9pbnQgPSBmb3JtRGF0YS5nZXQoYCR7b3BlcmF0aW9ufS1wb2ludGApO1xuICBjb25zdCBhZGRyZXNzID0gZm9ybURhdGEuZ2V0KGAke29wZXJhdGlvbn0tcG9pbnQtY2xpZW50LWFkZHJlc3NgKS50cmltKCk7XG4gIGNvbnN0IGFkZHJlc3NFbGVtZW50ID0gZm9ybS5lbGVtZW50c1tgJHtvcGVyYXRpb259LXBvaW50LWNsaWVudC1hZGRyZXNzYF07XG5cbiAgbGV0IHRlcm1pbmFsVGl0bGUgPSBg0KLQtdGA0LzQuNC90LDQuyDQv9C10YDQtdCy0L7Qt9GH0LjQutCwYDtcblxuICBjb25zdCBvcGVyYXRpb25Qb2ludFRlcm1pbmFsQ29udHJvbEVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgYC4ke29wZXJhdGlvbn0tdGVybWluYWwtY29udHJvbGBcbiAgKTtcbiAgY29uc3Qgb3BlcmF0aW9uUG9pbnRDbGllbnRDb250cm9sRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICBgLiR7b3BlcmF0aW9ufS1jbGllbnQtY29udHJvbGBcbiAgKTtcbiAgY29uc3Qgb3BlcmF0aW9uUG9pbnRQaWNrdXBDb250cm9sRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICBgLiR7b3BlcmF0aW9ufS1waWNrdXAtY29udHJvbGBcbiAgKTtcblxuICBjb25zdCBvcGVyYXRpb25Qb2ludFRlcm1pbmFsVGl0bGVFbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFxuICAgIGAuJHtvcGVyYXRpb259LXBvaW50LXRlcm1pbmFsLXRpdGxlYFxuICApO1xuXG4gIGNvbnN0IG9wZXJhdGlvblBvaW50Q2xpZW50QWRkcmVzc0dyb3VwRWxlbWVudCA9IGZvcm0ucXVlcnlTZWxlY3RvcihcbiAgICBgLmdyb3VwLSR7b3BlcmF0aW9ufS1wb2ludC1jbGllbnQtYWRkcmVzc2BcbiAgKTtcblxuICBvcGVyYXRpb25Qb2ludENsaWVudEFkZHJlc3NHcm91cEVsZW1lbnQuaGlkZGVuID1cbiAgICAhb3BlcmF0aW9uUG9pbnQgfHwgb3BlcmF0aW9uUG9pbnQgPT09IGAke29wZXJhdGlvbn0tcG9pbnQtdGVybWluYWxgO1xuXG4gIGlmICghb3BlcmF0aW9uUGxhY2UpIHtcbiAgICAvLyDQndC1INCy0YvQsdGA0LDQvSDQs9C+0YDQvtC0XG4gICAgb3BlcmF0aW9uUG9pbnRUZXJtaW5hbENvbnRyb2xFbGVtZW50LmhpZGRlbiA9IGZhbHNlO1xuICAgIG9wZXJhdGlvblBvaW50Q2xpZW50Q29udHJvbEVsZW1lbnQuaGlkZGVuID0gZmFsc2U7XG4gICAgb3BlcmF0aW9uUG9pbnRQaWNrdXBDb250cm9sRWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChvcGVyYXRpb25QbGFjZSBpbiB0ZXJtaW5hbHMpIHtcbiAgICAvLyDQktGL0LHRgNCw0L0g0LPQvtGA0L7QtCDQuNC3INGB0L/QuNGB0LrQsFxuICAgIG9wZXJhdGlvblBvaW50VGVybWluYWxDb250cm9sRWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgICBvcGVyYXRpb25Qb2ludENsaWVudENvbnRyb2xFbGVtZW50LmhpZGRlbiA9IGZhbHNlO1xuICAgIG9wZXJhdGlvblBvaW50UGlja3VwQ29udHJvbEVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcblxuICAgIHRlcm1pbmFsVGl0bGUgPSBg0KLQtdGA0LzQuNC90LDQuyDQv9C10YDQtdCy0L7Qt9GH0LjQutCwOiAke3dpbmRvdy50ZXJtaW5hbHNbb3BlcmF0aW9uUGxhY2VdfWA7XG5cbiAgICBpZiAoYWRkcmVzcyA9PT0gXCJcIiB8fCBPYmplY3QudmFsdWVzKHBsYWNlcykuaW5jbHVkZXMoYWRkcmVzcykpIHtcbiAgICAgIGFkZHJlc3NFbGVtZW50LnZhbHVlID0gcGxhY2VzW29wZXJhdGlvblBsYWNlXSArIFwiIFwiO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyDQktGL0LHRgNCw0L0g0LTRgNGD0LPQvtC5INCz0L7RgNC+0LRcbiAgICBvcGVyYXRpb25Qb2ludFRlcm1pbmFsQ29udHJvbEVsZW1lbnQuaGlkZGVuID0gdHJ1ZTtcbiAgICBvcGVyYXRpb25Qb2ludENsaWVudENvbnRyb2xFbGVtZW50LmhpZGRlbiA9IHRydWU7XG4gICAgb3BlcmF0aW9uUG9pbnRQaWNrdXBDb250cm9sRWxlbWVudC5oaWRkZW4gPSBmYWxzZTtcbiAgfVxuXG4gIG9wZXJhdGlvblBvaW50VGVybWluYWxUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXJtaW5hbFRpdGxlO1xufTtcblxuZXhwb3J0IGNvbnN0IHNldENhcmdvT3BlcmF0aW9uc1N0cnVjdHVyZSA9IChmb3JtKSA9PiB7XG4gIHNldENhcmdvT3BlcmF0aW9uU3RydWN0dXJlKGZvcm0sIFwibG9hZGluZ1wiKTtcbiAgc2V0Q2FyZ29PcGVyYXRpb25TdHJ1Y3R1cmUoZm9ybSwgXCJ1bmxvYWRpbmdcIik7XG59O1xuIiwiaW1wb3J0IHtmb3JtU2VyaWFsaXplLCBmb3JtRGVzZXJpYWxpemV9IGZyb20gXCIuL3V0aWxzXCI7XG5jb25zdCBldmVudExpc3RlbmVycyA9IFtdO1xuXG5leHBvcnQgY29uc3QgZW5hYmxlUGVyc2lzdGFuY2UgPSAoZm9ybSkgPT4ge1xuICBjb25zdCBmb3JtTmFtZSA9IGZvcm0uZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtcbiAgY29uc3QgZXZlbnRMaXN0ZW5lcnNPYmplY3QgPSBldmVudExpc3RlbmVycy5maW5kKChlbCkgPT4gZWwuZm9ybSA9PT0gZm9ybSk7XG4gIGlmIChldmVudExpc3RlbmVyc09iamVjdCkgdGhyb3cgRXJyb3IoYFBlcnNpc3RhbmNlIGFscmVhZHkgZW5hYmxlZCBmb3IgZm9ybWApO1xuXG4gIGNvbnN0IGhhbmRsZUZvcm1DaGFuZ2UgPSAoKSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IGZvcm1TZXJpYWxpemUoZm9ybSk7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShgZm9ybVtuYW1lPSR7Zm9ybU5hbWV9XWAsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgfTtcbiAgY29uc3QgaGFuZGxlRE9NQ29udGVudExvYWRlZCA9ICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKGBmb3JtW25hbWU9JHtmb3JtTmFtZX1dYCkpO1xuICAgIGZvcm1EZXNlcmlhbGl6ZShmb3JtLCBkYXRhKTtcblxuICAgIGZvcm0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjaGFuZ2VcIikpO1xuICB9O1xuXG4gIGV2ZW50TGlzdGVuZXJzLnB1c2goe2Zvcm0sIGhhbmRsZUZvcm1DaGFuZ2UsIGhhbmRsZURPTUNvbnRlbnRMb2FkZWR9KTtcblxuICBmb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgaGFuZGxlRm9ybUNoYW5nZSk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGhhbmRsZURPTUNvbnRlbnRMb2FkZWQpO1xufTtcblxuZXhwb3J0IGNvbnN0IGRpc2FibGVQZXJzaXN0YW5jZSA9IChmb3JtKSA9PiB7XG4gIGNvbnN0IGV2ZW50TGlzdGVuZXJzT2JqZWN0ID0gZXZlbnRMaXN0ZW5lcnMuZmluZCgoZWwpID0+IGVsLmZvcm0gPT09IGZvcm0pO1xuICBpZiAoIWV2ZW50TGlzdGVuZXJzT2JqZWN0KVxuICAgIHRocm93IEVycm9yKGBQZXJzaXN0YW5jZSBhbHJlYWR5IGRpc2FibGVkIGZvciBmb3JtYCk7XG5cbiAgZm9ybS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGV2ZW50TGlzdGVuZXJzT2JqZWN0LmhhbmRsZUZvcm1DaGFuZ2UpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgIFwiRE9NQ29udGVudExvYWRlZFwiLFxuICAgIGV2ZW50TGlzdGVuZXJzT2JqZWN0LmhhbmRsZURPTUNvbnRlbnRMb2FkZWRcbiAgKTtcbn07XG4iLCJpbXBvcnQge2NsZWFuRm9ybSwgc2F2ZUZvcm0sIHJlc3RvcmVTYXZlZEZvcm19IGZyb20gXCIuL2Zvcm0vdXRpbHNcIjtcbmltcG9ydCBzZXRTdWdnZXN0aW9ucyBmcm9tIFwiLi9vcmRlci9zdWdnZXN0aW9uXCI7XG5pbXBvcnQgbWFrZU9yZGVySlNPTiBmcm9tIFwiLi9vcmRlci9tYWtlLWpzb25cIjtcbmltcG9ydCBzZXRSZXF1aXJlZEF0dHJpYnV0ZXMgZnJvbSBcIi4vb3JkZXIvcmVxdWlyZWRcIjtcbmltcG9ydCB7XG4gIHNldFBheWVyVmlzaWJpbGl0eSxcbiAgc2V0Q291bnRlcnBhcnR5U3RydWN0dXJlLFxuICBzZXRDYXJnb09wZXJhdGlvbnNTdHJ1Y3R1cmVcbn0gZnJvbSBcIi4vb3JkZXIvZm9ybS1zdHJ1Y3R1cmVcIjtcbmltcG9ydCB7ZW5hYmxlUGVyc2lzdGFuY2V9IGZyb20gXCIuL2Zvcm0vcGVyc2lzdGFuY2UuanNcIjtcblxuY29uc3QgZm9ybSA9IGRvY3VtZW50LmZvcm1zLm9yZGVyO1xuZW5hYmxlUGVyc2lzdGFuY2UoZm9ybSk7XG5zZXRTdWdnZXN0aW9ucyhmb3JtKTtcblxuY29uc3QgY29uc2lnbmVySXNQYXllckVsZW1lbnQgPSBmb3JtLmVsZW1lbnRzW1wiY29uc2lnbmVyLWlzLXBheWVyXCJdO1xuY29uc3QgY29uc2lnbmVlSXNQYXllckVsZW1lbnQgPSBmb3JtLmVsZW1lbnRzW1wiY29uc2lnbmVlLWlzLXBheWVyXCJdO1xuXG5jb25zdCBoYW5kbGVJc1BheWVyQ2hlY2tib3hDaGFuZ2UgPSAoZXZlbnQpID0+IHtcbiAgaWYgKCFldmVudCkgcmV0dXJuO1xuXG4gIGlmIChcbiAgICBldmVudC50YXJnZXQgPT09IGNvbnNpZ25lcklzUGF5ZXJFbGVtZW50ICYmXG4gICAgY29uc2lnbmVySXNQYXllckVsZW1lbnQuY2hlY2tlZFxuICApIHtcbiAgICBjb25zaWduZWVJc1BheWVyRWxlbWVudC5jaGVja2VkID0gZmFsc2U7XG4gIH1cbiAgaWYgKFxuICAgIGV2ZW50LnRhcmdldCA9PT0gY29uc2lnbmVlSXNQYXllckVsZW1lbnQgJiZcbiAgICBjb25zaWduZWVJc1BheWVyRWxlbWVudC5jaGVja2VkXG4gICkge1xuICAgIGNvbnNpZ25lcklzUGF5ZXJFbGVtZW50LmNoZWNrZWQgPSBmYWxzZTtcbiAgfVxufTtcblxuY29uc3QgaGFuZGxlRm9ybUNoYW5nZSA9IChldmVudCkgPT4ge1xuICBoYW5kbGVJc1BheWVyQ2hlY2tib3hDaGFuZ2UoZXZlbnQpO1xuXG4gIHNldENvdW50ZXJwYXJ0eVN0cnVjdHVyZShmb3JtKTtcbiAgc2V0UGF5ZXJWaXNpYmlsaXR5KGZvcm0pO1xuICBzZXRDYXJnb09wZXJhdGlvbnNTdHJ1Y3R1cmUoZm9ybSk7XG4gIHNldFJlcXVpcmVkQXR0cmlidXRlcyhmb3JtKTtcbn07XG5cbmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBoYW5kbGVGb3JtQ2hhbmdlKTtcblxubGV0IGlzU3VibWl0aW5nID0gZmFsc2U7XG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIGlmIChpc1N1Ym1pdGluZykgcmV0dXJuO1xuICBpc1N1Ym1pdGluZyA9IHRydWU7XG5cbiAgY29uc3QgYnV0dG9uU3VibWl0ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uW3R5cGU9c3VibWl0XVwiKTtcbiAgYnV0dG9uU3VibWl0LmNsYXNzTGlzdC5hZGQoXCJidXR0b24tLXN1Ym1pdGluZ1wiKTtcblxuICBzYXZlRm9ybShmb3JtKTtcblxuICBjb25zdCBqc29uID0gbWFrZU9yZGVySlNPTihmb3JtKTtcblxuICBjb25zdCBkYXRhVG9TZW5kID0gbmV3IEZvcm1EYXRhKCk7XG4gIGRhdGFUb1NlbmQuYXBwZW5kKFwiZGF0YVwiLCBKU09OLnN0cmluZ2lmeShqc29uKSk7XG5cbiAgY29uc3QgZXJyb3JHcm91cEVsZW1lbnQgPSBmb3JtXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25bdHlwZT1zdWJtaXRdXCIpXG4gICAgLmNsb3Nlc3QoXCIuY29udHJvbC1ncm91cFwiKTtcbiAgZXJyb3JHcm91cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImNvbnRyb2wtZ3JvdXAtLWVycm9yXCIpO1xuXG4gIC8vIFRPRE8gdGltZW91dCBmb3IgZmV0Y2hcbiAgZmV0Y2goXCJwaHAvbWFpbGVyL3NlbmQucGhwXCIsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHk6IGRhdGFUb1NlbmRcbiAgfSlcbiAgICAudGhlbihmdW5jdGlvbiAocmVzKSB7XG4gICAgICBpZiAoIXJlcy5vaylcbiAgICAgICAgdGhyb3cgRXJyb3IoXG4gICAgICAgICAgXCLQn9GA0Lgg0L7RgtC/0YDQsNCy0LrQtSDQt9Cw0Y/QstC60Lgg0LLQvtC30L3QuNC60LvQsCDQvtGI0LjQsdC60LAsINC30LDRj9Cy0LrQsCDQvdC1INC+0YLQv9GA0LDQstC70LXQvdCwLlwiXG4gICAgICAgICk7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9KVxuICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIGlmIChkYXRhLnJlc3VsdCAhPT0gXCJzdWNjZXNzXCIpXG4gICAgICAgIHRocm93IEVycm9yKFxuICAgICAgICAgIFwi0J/RgNC4INC+0YLQv9GA0LDQstC60LUg0LfQsNGP0LLQutC4INCy0L7Qt9C90LjQutC70LAg0L7RiNC40LHQutCwINC/0L7Rh9GC0L7QstC+0LPQviDRgdC10YDQstC10YDQsCwg0LfQsNGP0LLQutCwINC90LUg0L7RgtC/0YDQsNCy0LvQtdC90LAuXCJcbiAgICAgICAgKTtcblxuICAgICAgY2xlYW5Gb3JtKGZvcm0pO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmFzc2lnbihcIm9yZGVyLW9rLmh0bWxcIik7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICBlcnJvckdyb3VwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiY29udHJvbC1ncm91cC0tZXJyb3JcIik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBidXR0b25TdWJtaXQuY2xhc3NMaXN0LnJlbW92ZShcImJ1dHRvbi0tc3VibWl0aW5nXCIpO1xuICAgICAgaXNTdWJtaXRpbmcgPSBmYWxzZTtcbiAgICB9KTtcblxuICAvLyBjb25zdCBjb250ZW50ID0gZGlhbG9nLiRlbC5xdWVyeVNlbGVjdG9yKFwiLmRpYWxvZy1jb250ZW50X19kYXRhXCIpO1xuICAvLyB3aW5kb3cuZGlhbG9nLnNob3coKTtcbn0pO1xuXG5jb25zdCBjbGVhbkZvcm1FbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnN1Z2dlc3QtaGVscGVyLS1jbGVhbi1mb3JtXCIpO1xuY2xlYW5Gb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbGVhbkZvcm0oZm9ybSk7XG59KTtcblxuY29uc3QgZmlsbEZvcm1FbGVtZW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKFwiLnN1Z2dlc3QtaGVscGVyLS1maWxsLWZvcm1cIik7XG5maWxsRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHJlc3RvcmVTYXZlZEZvcm0oZm9ybSkpO1xuIiwiaW1wb3J0IHtzdWdnZXN0aW9uVG9rZW59IGZyb20gXCIuLi9jb25maWdcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2V0U3VnZ2VzdGlvbnMoZm9ybSkge1xuICBjb25zdCBzdWdnZXN0aW9uRWxlbWVudHMgPSBmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1zdWdnZXN0aW9uLXR5cGVdXCIpO1xuICBzdWdnZXN0aW9uRWxlbWVudHMuZm9yRWFjaCgoZWwpID0+IHtcbiAgICBjb25zdCB0eXBlID0ge1xuICAgICAgYWRkcmVzczogXCJBRERSRVNTXCIsXG4gICAgICBuYW1lOiBcIk5BTUVcIixcbiAgICAgIGVtYWlsOiBcIkVNQUlMXCJcbiAgICB9W2VsLmRhdGFzZXQuc3VnZ2VzdGlvblR5cGVdO1xuXG4gICAgaWYgKCF0eXBlKSB0aHJvdyBFcnJvcigpO1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmXG4gICAgJChlbCkuc3VnZ2VzdGlvbnMoe3Rva2VuOiBzdWdnZXN0aW9uVG9rZW4sIHR5cGV9KTtcbiAgICAvLyBUT0RPINCw0LTRgNC10YEg0LHQtdC3INC+0LHQu9Cw0YHRgtC4INC4INGA0LDQudC+0L3QsCBodHRwczovL2NvZGVwZW4uaW8vZGFkYXRhL3Blbi9xZHdQZFpcbiAgfSk7XG5cbiAgY29uc3Qgc2V0SGFuZGxlcnMgPSAoY291bnRlcnBhcnR5Um9sZSkgPT4ge1xuICAgIGNvbnN0IGNvdW50ZXJwYXJ0eUVsZW1lbnQgPSBmb3JtLmVsZW1lbnRzW2Ake2NvdW50ZXJwYXJ0eVJvbGV9YF07XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWZcbiAgICAkKGNvdW50ZXJwYXJ0eUVsZW1lbnQpLnN1Z2dlc3Rpb25zKHtcbiAgICAgIHRva2VuOiBzdWdnZXN0aW9uVG9rZW4sXG4gICAgICB0eXBlOiBcIlBBUlRZXCIsXG4gICAgICBvblNlbGVjdDogZnVuY3Rpb24gKHN1Z2dlc3Rpb24pIHtcbiAgICAgICAgY29uc3QgT0dSTkVsZW1lbnQgPSBmb3JtLmVsZW1lbnRzW2Ake2NvdW50ZXJwYXJ0eVJvbGV9LU9HUk5gXTtcbiAgICAgICAgY29uc3QgSU5ORWxlbWVudCA9IGZvcm0uZWxlbWVudHNbYCR7Y291bnRlcnBhcnR5Um9sZX0tSU5OYF07XG4gICAgICAgIGNvbnN0IEtQUEVsZW1lbnQgPSBmb3JtLmVsZW1lbnRzW2Ake2NvdW50ZXJwYXJ0eVJvbGV9LUtQUGBdO1xuICAgICAgICBjb25zdCBhZGRyZXNzRWxlbWVudCA9IGZvcm0uZWxlbWVudHNbYCR7Y291bnRlcnBhcnR5Um9sZX0tYWRkcmVzc2BdO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHN1Z2dlc3Rpb24pO1xuXG4gICAgICAgIGNvbnN0IGFkZHJlc3MgPSBzdWdnZXN0aW9uLmRhdGEuYWRkcmVzcy52YWx1ZTtcblxuICAgICAgICBpZiAoc3VnZ2VzdGlvbi5kYXRhLnR5cGUgPT09IFwiSU5ESVZJRFVBTFwiKSB7XG4gICAgICAgICAgT0dSTkVsZW1lbnQudmFsdWUgPSBzdWdnZXN0aW9uLmRhdGEub2dybjtcbiAgICAgICAgICBJTk5FbGVtZW50LnZhbHVlID0gc3VnZ2VzdGlvbi5kYXRhLmlubjtcbiAgICAgICAgICBLUFBFbGVtZW50LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICBhZGRyZXNzRWxlbWVudC52YWx1ZSA9IGFkZHJlc3M7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc3VnZ2VzdGlvbi5kYXRhLnR5cGUgPT09IFwiTEVHQUxcIikge1xuICAgICAgICAgIE9HUk5FbGVtZW50LnZhbHVlID0gc3VnZ2VzdGlvbi5kYXRhLm9ncm47XG4gICAgICAgICAgSU5ORWxlbWVudC52YWx1ZSA9IHN1Z2dlc3Rpb24uZGF0YS5pbm47XG4gICAgICAgICAgS1BQRWxlbWVudC52YWx1ZSA9IHN1Z2dlc3Rpb24uZGF0YS5rcHA7XG4gICAgICAgICAgYWRkcmVzc0VsZW1lbnQudmFsdWUgPSBhZGRyZXNzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG5cbiAgc2V0SGFuZGxlcnMoXCJjb25zaWduZXJcIik7XG4gIHNldEhhbmRsZXJzKFwiY29uc2lnbmVlXCIpO1xuICBzZXRIYW5kbGVycyhcInBheWVyXCIpO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgKGZvcm0pID0+IHtcbiAgY29uc3QgY29udHJvbHNSZXF1aXJlZCA9IGZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5jb250cm9sLS1yZXF1aXJlZFwiKTtcblxuICBjb250cm9sc1JlcXVpcmVkLmZvckVhY2goKGVsKSA9PiB7XG4gICAgY29uc3QgdWlFbGVtZW50ID0gZWwucXVlcnlTZWxlY3RvcihcImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0XCIpO1xuICAgIGlmICh1aUVsZW1lbnQubWF0Y2hlcyhcIltoaWRkZW5dICpcIikpIHtcbiAgICAgIHVpRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJyZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdWlFbGVtZW50LnNldEF0dHJpYnV0ZShcInJlcXVpcmVkXCIsIFwiXCIpO1xuICB9KTtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCAoZm9ybSkgPT4ge1xuICBjb25zdCBkYXRhID0gbmV3IEZvcm1EYXRhKGZvcm0pO1xuICBjb25zdCBvcmRlciA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGNvbnN0IHBsYWNlcyA9IHdpbmRvdy5wbGFjZXM7XG5cbiAgY29uc3QgY2FyZ28gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBPYmplY3QuZW50cmllcyh7XG4gICAgbmFtZTogXCJjYXJnb1wiLFxuICAgIHdlaWdodDogXCJjYXJnby13ZWlnaHRcIixcbiAgICB2b2x1bWU6IFwiY2FyZ28tdm9sdW1lXCIsXG4gICAgcXR5OiBcImNhcmdvLXF0eVwiLFxuICAgIGNvbmRpdGlvbjogXCJjYXJnby1jb25kaXRpb25cIixcbiAgICB2YWx1ZTogXCJjYXJnby12YWx1ZVwiLFxuICAgIGluc3VyYW5jZTogXCJpbnN1cmFuY2VcIlxuICB9KS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICBjYXJnb1trZXldID0gZGF0YS5nZXQodmFsdWUpO1xuICB9KTtcbiAgb3JkZXIuY2FyZ28gPSBjYXJnbztcblxuICBbXCJjb25zaWduZXJcIiwgXCJjb25zaWduZWVcIiwgXCJwYXllclwiXS5mb3JFYWNoKChyb2xlKSA9PiB7XG4gICAgaWYgKFxuICAgICAgcm9sZSA9PT0gXCJwYXllclwiICYmXG4gICAgICAoQm9vbGVhbihkYXRhLmdldChcImNvbnNpZ25lci1pcy1wYXllclwiKSkgfHxcbiAgICAgICAgQm9vbGVhbihkYXRhLmdldChcImNvbnNpZ25lZS1pcy1wYXllclwiKSkpXG4gICAgKVxuICAgICAgcmV0dXJuO1xuXG4gICAgY29uc3QgY291bnRlckFnZW50ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBjb25zdCBjb3VudGVyQWdlbnRUeXBlID0gZGF0YS5nZXQoYCR7cm9sZX0tdHlwZWApO1xuICAgIGNvdW50ZXJBZ2VudC50eXBlID0gY291bnRlckFnZW50VHlwZTtcbiAgICBpZiAoY291bnRlckFnZW50VHlwZSA9PT0gXCJsZWdhbC1lbnRpdHlcIikge1xuICAgICAgT2JqZWN0LmVudHJpZXMoe1xuICAgICAgICBuYW1lOiBgJHtyb2xlfWAsXG4gICAgICAgIElOTjogYCR7cm9sZX0tSU5OYCxcbiAgICAgICAgS1BQOiBgJHtyb2xlfS1LUFBgLFxuICAgICAgICBPR1JOOiBgJHtyb2xlfS1PR1JOYCxcbiAgICAgICAgYWRkcmVzczogYCR7cm9sZX0tYWRkcmVzc2AsXG4gICAgICAgIGNhcmdvQ29udGFjdFRlbDogYCR7cm9sZX0tY2FyZ28tY29udGFjdC10ZWxgLFxuICAgICAgICBjYXJnb0NvbnRhY3RGaW86IGAke3JvbGV9LWNhcmdvLWNvbnRhY3QtZmlvYCxcbiAgICAgICAgcGF5aW5nQ29udGFjdFRlbDogYCR7cm9sZX0tcGF5aW5nLWNvbnRhY3QtdGVsYCxcbiAgICAgICAgcGF5aW5nQ29udGFjdEZpbzogYCR7cm9sZX0tcGF5aW5nLWNvbnRhY3QtZmlvYFxuICAgICAgfSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICByb2xlID09PSBcInBheWVyXCIgJiZcbiAgICAgICAgICAoa2V5ID09PSBcImNhcmdvQ29udGFjdFRlbFwiIHx8IGtleSA9PT0gXCJjYXJnb0NvbnRhY3RGaW9cIilcbiAgICAgICAgKVxuICAgICAgICAgIHJldHVybjtcblxuICAgICAgICBjb3VudGVyQWdlbnRba2V5XSA9IGRhdGEuZ2V0KHZhbHVlKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAoY291bnRlckFnZW50VHlwZSA9PT0gXCJwcml2YXRlLXBlcnNvblwiKSB7XG4gICAgICBPYmplY3QuZW50cmllcyh7XG4gICAgICAgIG5hbWU6IGAke3JvbGV9LWZpb2AsXG4gICAgICAgIHRlbDogYCR7cm9sZX0tdGVsYFxuICAgICAgfSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGNvdW50ZXJBZ2VudFtrZXldID0gZGF0YS5nZXQodmFsdWUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKFtcImNvbnNpZ25lclwiLCBcImNvbnNpZ25lZVwiXS5pbmNsdWRlcyhyb2xlKSkge1xuICAgICAgY291bnRlckFnZW50LmlzUGF5ZXIgPSBCb29sZWFuKGRhdGEuZ2V0KGAke3JvbGV9LWlzLXBheWVyYCkpO1xuICAgIH1cblxuICAgIG9yZGVyW3JvbGVdID0gY291bnRlckFnZW50O1xuICB9KTtcblxuICBbXCJsb2FkaW5nXCIsIFwidW5sb2FkaW5nXCJdLmZvckVhY2goKG9wZXJhdGlvbikgPT4ge1xuICAgIGNvbnN0IG9wZXJhdGlvbk9iamVjdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgT2JqZWN0LmVudHJpZXMoe1xuICAgICAgZGF0ZTogYCR7b3BlcmF0aW9ufS1kYXRlYCxcbiAgICAgIHRpbWU6IGAke29wZXJhdGlvbn0tdGltZWAsXG4gICAgICBwbGFjZTogYCR7b3BlcmF0aW9ufS1wbGFjZWAsXG4gICAgICBwb2ludDogYCR7b3BlcmF0aW9ufS1wb2ludGAsXG4gICAgICBwb2ludENsaWVudEFkZHJlc3M6IGAke29wZXJhdGlvbn0tcG9pbnQtY2xpZW50LWFkZHJlc3NgXG4gICAgfSkuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAoa2V5ID09PSBcInBsYWNlXCIpIHtcbiAgICAgICAgb3BlcmF0aW9uT2JqZWN0W2tleV0gPSBwbGFjZXNbZGF0YS5nZXQodmFsdWUpXSA/PyBcIlwiO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIG9wZXJhdGlvbk9iamVjdFtrZXldID0gZGF0YS5nZXQodmFsdWUpO1xuICAgIH0pO1xuICAgIG9yZGVyW29wZXJhdGlvbl0gPSBvcGVyYXRpb25PYmplY3Q7XG4gIH0pO1xuXG4gIG9yZGVyLnBheW1lbnRGb3JtID0gZGF0YS5nZXQoXCJwYXltZW50LWZvcm1cIik7XG4gIG9yZGVyLm1lbW8gPSBkYXRhLmdldChcIm1lbW9cIik7XG5cbiAgY29uc3QgYXV0aG9yID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgW1wiZmlvXCIsIFwidGVsXCIsIFwiZW1haWxcIl0uZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgYXV0aG9yW2tleV0gPSBkYXRhLmdldChgb3JkZXItYXV0aG9yLSR7a2V5fWApO1xuICB9KTtcbiAgb3JkZXIuYXV0aG9yID0gYXV0aG9yO1xuXG4gIHJldHVybiBvcmRlcjtcbn07XG4iXSwibmFtZXMiOlsiY2xlYW5Gb3JtIiwiZm9ybSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbWVudCIsIm1hdGNoZXMiLCJjaGVja2VkIiwidmFsdWUiLCJkaXNwYXRjaEV2ZW50IiwiRXZlbnQiLCJmb3JtU2VyaWFsaXplIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsIk9iamVjdCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsImZpbHRlciIsImtleSIsImRlc2VyaWFsaXplRWxlbWVudCIsImdldEF0dHJpYnV0ZSIsIkVycm9yIiwiZm9ybURlc2VyaWFsaXplIiwiZGF0YSIsImVsZW1lbnRzTWFwIiwibWFwIiwiZWwiLCJyZWR1Y2UiLCJhY2MiLCJwcmV2VmFsdWUiLCJBcnJheSIsImlzQXJyYXkiLCJwdXNoIiwiY3JlYXRlIiwibWFrZUVsZW1lbnRzTWFwIiwic3VnZ2VzdGlvblRva2VuIiwic2V0Q291bnRlcnBhcnR5Um9sZVN0cnVjdHVyZSIsInJvbGUiLCJsZWdhbEVudGl0eUdyb3VwRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcml2YXRlUGVyc29uR3JvdXBFbGVtZW50IiwidHlwZSIsImdldCIsImhpZGRlbiIsInNldENhcmdvT3BlcmF0aW9uU3RydWN0dXJlIiwib3BlcmF0aW9uIiwidGVybWluYWxzIiwid2luZG93IiwicGxhY2VzIiwib3BlcmF0aW9uUGxhY2UiLCJvcGVyYXRpb25Qb2ludCIsImFkZHJlc3MiLCJ0cmltIiwiYWRkcmVzc0VsZW1lbnQiLCJlbGVtZW50cyIsInRlcm1pbmFsVGl0bGUiLCJvcGVyYXRpb25Qb2ludFRlcm1pbmFsQ29udHJvbEVsZW1lbnQiLCJvcGVyYXRpb25Qb2ludENsaWVudENvbnRyb2xFbGVtZW50Iiwib3BlcmF0aW9uUG9pbnRQaWNrdXBDb250cm9sRWxlbWVudCIsIm9wZXJhdGlvblBvaW50VGVybWluYWxUaXRsZUVsZW1lbnQiLCJ2YWx1ZXMiLCJpbmNsdWRlcyIsInRleHRDb250ZW50IiwiZXZlbnRMaXN0ZW5lcnMiLCJkb2N1bWVudCIsImZvcm1zIiwib3JkZXIiLCJmb3JtTmFtZSIsImZpbmQiLCJoYW5kbGVGb3JtQ2hhbmdlIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImhhbmRsZURPTUNvbnRlbnRMb2FkZWQiLCJwYXJzZSIsImdldEl0ZW0iLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlUGVyc2lzdGFuY2UiLCJuYW1lIiwiZW1haWwiLCJkYXRhc2V0Iiwic3VnZ2VzdGlvblR5cGUiLCIkIiwic3VnZ2VzdGlvbnMiLCJ0b2tlbiIsInNldEhhbmRsZXJzIiwiY291bnRlcnBhcnR5Um9sZSIsImNvdW50ZXJwYXJ0eUVsZW1lbnQiLCJvblNlbGVjdCIsInN1Z2dlc3Rpb24iLCJPR1JORWxlbWVudCIsIklOTkVsZW1lbnQiLCJLUFBFbGVtZW50IiwiY29uc29sZSIsImxvZyIsIm9ncm4iLCJpbm4iLCJrcHAiLCJzZXRTdWdnZXN0aW9ucyIsImNvbnNpZ25lcklzUGF5ZXJFbGVtZW50IiwiY29uc2lnbmVlSXNQYXllckVsZW1lbnQiLCJldmVudCIsInRhcmdldCIsImhhbmRsZUlzUGF5ZXJDaGVja2JveENoYW5nZSIsInNldENvdW50ZXJwYXJ0eVN0cnVjdHVyZSIsInJvbGVQYXlpbmdDb250YWN0RWxlbWVudCIsInJvbGVUeXBlIiwicm9sZVBheWluZ0NvbnRhY3RFbmFibGVkIiwiY29uc2lnbmVySXNQYXllciIsImNvbnNpZ25lZUlzUGF5ZXIiLCJzZXRQYXllclZpc2liaWxpdHkiLCJzZXRDYXJnb09wZXJhdGlvbnNTdHJ1Y3R1cmUiLCJ1aUVsZW1lbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJzZXRSZXF1aXJlZEF0dHJpYnV0ZXMiLCJpc1N1Ym1pdGluZyIsInByZXZlbnREZWZhdWx0IiwiYnV0dG9uU3VibWl0IiwiY2xhc3NMaXN0IiwiYWRkIiwibG9jYWxTdG9yYWdlIiwic2F2ZUZvcm0iLCJqc29uIiwiY2FyZ28iLCJ3ZWlnaHQiLCJ2b2x1bWUiLCJxdHkiLCJjb25kaXRpb24iLCJpbnN1cmFuY2UiLCJCb29sZWFuIiwiY291bnRlckFnZW50IiwiY291bnRlckFnZW50VHlwZSIsIklOTiIsIktQUCIsIk9HUk4iLCJjYXJnb0NvbnRhY3RUZWwiLCJjYXJnb0NvbnRhY3RGaW8iLCJwYXlpbmdDb250YWN0VGVsIiwicGF5aW5nQ29udGFjdEZpbyIsInRlbCIsImlzUGF5ZXIiLCJvcGVyYXRpb25PYmplY3QiLCJkYXRlIiwidGltZSIsInBsYWNlIiwicG9pbnQiLCJwb2ludENsaWVudEFkZHJlc3MiLCJwYXltZW50Rm9ybSIsIm1lbW8iLCJhdXRob3IiLCJtYWtlT3JkZXJKU09OIiwiZGF0YVRvU2VuZCIsImFwcGVuZCIsImVycm9yR3JvdXBFbGVtZW50IiwiY2xvc2VzdCIsInJlbW92ZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsInRoZW4iLCJyZXMiLCJvayIsInJlc3VsdCIsImxvY2F0aW9uIiwiYXNzaWduIiwiY2F0Y2giLCJlcnIiLCJlcnJvciIsIm1lc3NhZ2UiLCJmaW5hbGx5Iiwic2F2ZWRGb3JtIiwicmVzdG9yZVNhdmVkRm9ybSJdLCJtYXBwaW5ncyI6InlCQUFPLE1BQU1BLEVBQWFDLElBQ0ZBLEVBQUtDLGlCQUFpQixVQUM5QkMsU0FBU0MsSUFDakJBLEVBQVFDLFFBQVEsMkNBQ2xCRCxFQUFRRSxTQUFVLEVBSXBCRixFQUFRRyxNQUFRLE1BRWxCTixFQUFLTyxjQUFjLElBQUlDLE1BQU0sWUFvQmxCQyxFQUFpQlQsSUFDNUIsTUFBTVUsRUFBVyxJQUFJQyxTQUFTWCxHQUc5QixPQUFPWSxPQUFPQyxZQUNaLElBQUlILEVBQVNJLFdBQVdDLFFBQU8sRUFBRUMsRUFBS1YsS0FBcUIsS0FBVkEsTUF5Qi9DVyxFQUFxQixDQUFDZCxFQUFTYSxFQUFLVixLQUN4QyxHQUFJSCxFQUFRZSxhQUFhLFVBQVlGLEVBQUssTUFBTUcsUUFFNUNoQixF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"}