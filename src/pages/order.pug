extends ../pug/layout
block variables
  -
    title = "–ó–∞—è–≤–∫–∞"
    description = "–û–Ω–ª–∞–π–Ω –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫—É –≤ –¢–ö –ë–µ—Ä–≥."

mixin contact(role, responsibility)
  -
    if (!responsibility) {
      responsibility = role === 'payer' ? 'paying' : 'cargo'
    };
    const prefix = `${role}-${responsibility}`;
  .control-group.grid12(class=`${prefix}-contact`)&attributes(attributes)
    .control.grid12__col.grid12__desktop-col.grid12__desktop-col--6
      label(for=`${prefix}-contact-fio`)
        case responsibility
          when 'cargo'
            | –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø–µ—Ä–µ–¥–∞—á–∏ –≥—Ä—É–∑–∞
          when 'paying'
            | –ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º –æ–ø–ª–∞—Ç—ã –ø–µ—Ä–µ–≤–æ–∑–∫–∏

      input(id=`${prefix}-contact-fio`, type="text", name=`${prefix}-contact-fio`, data-suggestion-type="name")
    .control.grid12__col.grid12__desktop-col.grid12__desktop-col--6
      label(for=`${prefix}-contact-tel`) –¢–µ–ª–µ—Ñ–æ–Ω
      input(id=`${prefix}-contact-tel`, type="tel", name=`${prefix}-contact-tel`)

mixin counterpartyRole(role)
  -
    const roles = {
      consigner: "–ì—Ä—É–∑–æ–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å",
      consignee: "–ì—Ä—É–∑–æ–ø–æ–ª—É—á–∞—Ç–µ–ª—å",
      payer: "–ü–ª–∞—Ç–µ–ª—å—â–∏–∫"
    }

  .control-group(style="display: flex;")
    .control.control--required
      input(id=`${role}-type-legal-entity`, type="radio", name=`${role}-type`, value="legal-entity")
      label.control__label(for=`${role}-type-legal-entity`) –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏–ª–∏ –ò–ü
    .control.control--required
      input(id=`${role}-type-private-person`, type="radio", name=`${role}-type`, value="private-person")
      label.control__label(for=`${role}-type-private-person`) –ß–∞—Å—Ç–Ω–æ–µ –ª–∏—Ü–æ

  div(class=`group-${role}-legal-entity`, hidden)
    .control-group.grid12
      .control.control--required.grid12__col
        label.control__label(for=`${role}`) –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∏–ª–∏ –ò–ü
        p.control__hint –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –ò–ù–ù, –û–ì–†–ù –∏–ª–∏ –∞–¥—Ä–µ—Å.
        input(id=`${role}`, type="text", name=`${role}`, placeholder="–Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–¥—Ä–µ—Å, –ò–ù–ù –∏–ª–∏ –û–ì–†–ù")

      .control.grid12__col.grid12__col--6.grid12__desktop-col.grid12__desktop-col--4
        label(for=`${role}-INN`) –ò–ù–ù
        input(id=`${role}-INN`, type="text", name=`${role}-INN`)
      .control.grid12__col.grid12__col--6.grid12__desktop-col.grid12__desktop-col--4
        label(for=`${role}-KPP`) –ö–ü–ü
        input(id=`${role}-KPP`, type="text", name=`${role}-KPP`)
      .control.grid12__col.grid12__col--12.grid12__desktop-col.grid12__desktop-col--4
        label(for=`${role}-OGRN`) –û–ì–†–ù
        input(id=`${role}-OGRN`, type="text", name=`${role}-OGRN`)
      .control.grid12__col
        label
          span –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å
          textarea(id=`${role}-address`, name=`${role}-address`, data-suggestion-type="address")
    +contact(role)

  .control-group.grid12(class=`group-${role}-private-person`, hidden)
    .control.control--required.grid12__col.grid12__desktop-col.grid12__desktop-col--6
      label.control__label(for=`${role}-fio`) –§–ò–û
      input(id=`${role}-fio`, type="text", name=`${role}-fio`, data-suggestion-type="name")

    .control.control--required.grid12__col.grid12__desktop-col.grid12__desktop-col--6
      label.control__label(for=`${role}-tel`) –¢–µ–ª–µ—Ñ–æ–Ω
      input(id=`${role}-tel`, type="tel", name=`${role}-tel`)

  case role
    when 'consigner'
    when 'consignee'
      .control-group
        .control
          input(id=`${role}-is-payer`, type="checkbox", name=`${role}-is-payer`, value=`${role}-is-payer`)
          label(for=`${role}-is-payer`) #{roles[role]} —è–≤–ª—è–µ—Ç—Å—è –ø–ª–∞—Ç–µ–ª—å—â–∏–∫–æ–º

  if role !== 'payer'
    +contact(role, 'paying')(hidden)

mixin cargoOperation(operation)
  case operation
    when 'loading'
      section
        h4.h4 –ì—Ä—É–∑–æ–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
        +counterpartyRole('consigner')
    when 'unloading'
      section
        h4.h4 –ì—Ä—É–∑–æ–ø–æ–ª—É—á–∞—Ç–µ–ª—å
        +counterpartyRole('consignee')

  if operation === 'loading'
    h4.h4 –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    .control-group.flex.flex--wrap
      label.control.control--required.min-content
        span.control__label –î–∞—Ç–∞
        |
        input(id=`${operation}-date`, type="date", name=`${operation}-date`)

      label.control.min-content
        span.control__label –í—Ä–µ–º—è
        |
        input(id=`${operation}-time`, type="text", name=`${operation}-time`, style="width: 20ch;")
      p.control-group__hint –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥–∞—á—É –º–∞—à–∏–Ω—ã –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ —Å—É—Ç–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –¥–æ #[time 16:00]

  h4.h4
    case operation
      when 'loading'
        | –ú–µ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–∑–∞
      when 'unloading'
        | –ú–µ—Å—Ç–æ –ø–æ–ª—É—á–µ–Ω–∏—è –≥—Ä—É–∑–∞

  .grid12
    .control-group.grid12__col
      .control.control--required
        label.control__label(for=`${operation}-place`)
          case operation
            when 'loading'
              | –ì–æ—Ä–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–∑–∞
            when 'unloading'
              | –ì–æ—Ä–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –≥—Ä—É–∑–∞

        select(id=`${operation}-place`, name=`${operation}-place`)
          option(selected, disabled, value="") &lt;–Ω–µ –≤—ã–±—Ä–∞–Ω–æ&gt;
          each placeName, place in places
            option(value=place)=placeName
          option(value="other") –î—Ä—É–≥–æ–π –≥–æ—Ä–æ–¥
        p.control__hint –î–ª—è –ø–æ–¥–∞—á–∏ –º–∞—à–∏–Ω—ã –≤ –≥–æ—Ä–æ–¥ –ê—Ä—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ #[q –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫].

    .control-group.grid12__col
      .control.control--required(class=`${operation}-terminal-control`)
        input(id=`${operation}-point-terminal`, type="radio", name=`${operation}-point`, value=`${operation}-point-terminal`)
        label.control__label(class=`${operation}-point-terminal-title`, for=`${operation}-point-terminal`) –¢–µ—Ä–º–∏–Ω–∞–ª –ø–µ—Ä–µ–≤–æ–∑—á–∏–∫–∞
      .control.control--required(class=`${operation}-client-control`)
        input(id=`${operation}-point-client`, type="radio", name=`${operation}-point`, value=`${operation}-point-client`)
        label.control__label(for=`${operation}-point-client`) –ü–æ–¥–∞—á–∞ –º–∞—à–∏–Ω—ã –ø–æ –∞–¥—Ä–µ—Å—É —Å–∫–ª–∞–¥–∞ #{{loading:`–≥—Ä—É–∑–æ–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è`, unloading:`–≥—Ä—É–∑–æ–ø–æ–ª—É—á–∞—Ç–µ–ª—è`}[operation] || ''}
      .control.control--required(class=`${operation}-pickup-control`)
        input(id=`${operation}-point-pickup`, type="radio", name=`${operation}-point`, value=`${operation}-point-pickup`)
        label.control__label(for=`${operation}-point-pickup`) –ü–µ—Ä–µ–¥–∞—á–∞ –≥—Ä—É–∑–∞ –Ω–∞ —Ç—Ä–∞—Å—Å–µ –≤ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–µ —Å –≤–æ–¥–∏—Ç–µ–ª–µ–º –≤—Ä–µ–º—è

    .control-group.grid12__col(class=`group-${operation}-point-client-address`, hidden)
      label.control.control--required
        span.control__label –ê–¥—Ä–µ—Å –ø–µ—Ä–µ–¥–∞—á–∏ –≥—Ä—É–∑–∞
        textarea(id=`${operation}-point-client-address`, name=`${operation}-point-client-address`, data-suggestion-type="address")

block head
  link(rel="canonical", href="order.html")
  script(src="https://polyfill.io/v3/polyfill.min.js?features=fetch")
  //- zepto –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ
  //- script(src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.2.0/zepto.min.js", integrity="sha512-BrvVYNhKh6yST24E5DY/LopLO5d+8KYmIXyrpBIJ2PK+CyyJw/cLSG/BfJomWLC1IblNrmiJWGlrGueKLd/Ekw==", crossorigin="anonymous", referrerpolicy="no-referrer")
  link(href="vendor/suggestions/suggestions.min.css", rel="stylesheet")
  style.
    .suggestions-promo {
      display: none !important;
    }

block content
  include ../pug/tariffs
  -
    const places = tariffs.places;

  form.form.form--order(name="order", onsubmit="return false;")
    div(style="display: flex; gap: 1ch; justify-content: space-between; align-items: baseline;")
      h2.h2 –ó–∞—è–≤–∫–∞ –Ω–∞ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫—É
      button.suggest-helper.suggest-helper--clean-form(type="button", style="margin-left: auto;")
        span.suggest-helper__label –û—á–∏—Å—Ç–∏—Ç—å –∑–∞—è–≤–∫—É
      button.suggest-helper.suggest-helper--fill-form(type="button")
        span.suggest-helper__label –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∑–∞—è–≤–∫–µ
    section.form__section
      h3.h3 1. –ì—Ä—É–∑
      .control-group.grid12.form__section-content
        .control.control--required.grid12__col.grid12__col--12
          label.control__label(for="cargo") –ù–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
          input#cargo(type="text", name="cargo")
        .control.control--required.grid12__col.grid12__col--4.grid12__desktop-col.grid12__desktop-col--2
          label.control__label(for="cargo-weight") –í–µ—Å, –∫–≥
          input#cargo-weight(type="text", name="cargo-weight", inputmode="numeric")
        .control.control--required.grid12__col.grid12__col--4.grid12__desktop-col.grid12__desktop-col--2
          label.control__label(for="cargo-volume") –û–±—ä–µ–º, –º¬≥
          input#cargo-volume(type="text", name="cargo-volume", inputmode="numeric")
        .control.control--required.grid12__col.grid12__col--4.grid12__desktop-col.grid12__desktop-col--2
          label.control__label(for="cargo-qty") –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç
          input#cargo-qty(type="text", name="cargo-qty", inputmode="numeric")
        .control.grid12__col.grid12__col--6.grid12__desktop-col.grid12__desktop-col--3
          label.control__label(for="cargo-condition") –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π —Ä–µ–∂–∏–º
          input#cargo-condition(type="text", name="cargo-condition", placeholder="–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è")
        .control.grid12__col.grid12__col--6.grid12__desktop-col.grid12__desktop-col--3
          label.control__label(for="cargo-value") –û–±—ä—è–≤–ª–µ–Ω–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å, —Ä—É–±.
          input#cargo-value(type="text", name="cargo-value", inputmode="numeric")
        label.control.grid12__col.grid12__col--6.grid12__desktop-col.grid12__desktop-col--3
          span.control__label –°—Ç—Ä–∞—Ö–æ–≤–∫–∞
          select#insurance(name="insurance")
            option(selected, value="") –Ω–µ —Å—Ç—Ä–∞—Ö–æ–≤–∞—Ç—å
            option(value="—Å—Ç—Ä–∞—Ö–æ–≤–∞—Ç—å") —Å—Ç—Ä–∞—Ö–æ–≤–∞—Ç—å

    section.form__section
      h3.h3 2. –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥—Ä—É–∑–∞
      .form__section-content
        +cargoOperation('loading')
    section.form__section
      h3.h3 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä—É–∑–∞
      .form__section-content
        +cargoOperation('unloading')

    section.form__section
      h3.h3 4. –û–ø–ª–∞—Ç–∞
      .form__section-content
        section.section-payer
          h4.h4 –ü–ª–∞—Ç–µ–ª—å—â–∏–∫
          +counterpartyRole('payer')
        section
          h4.h4 –§–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã
          .control-group
            .control.control--required
              label.control__label(for="payment-form") –§–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã
              select#payment-form(name="payment-form")
                option(selected, disabled, value="") &lt;–Ω–µ –≤—ã–±—Ä–∞–Ω–æ&gt;
                option –ë–µ–∑–Ω–∞–ª–∏—á–Ω–∞—è
                option –ù–∞–ª–∏—á–Ω—ã–º–∏ —Å —á–µ–∫–æ–º
                option –ù–∞–ª–∏—á–Ω—ã–º–∏ –±–µ–∑ —á–µ–∫–∞
              p.control__hint –ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ–≥–æ–≤–æ—Ä–∞.

    section.form__section
      h3.h3
        label(for="memo") 5. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
      .control-group
        .control
          textarea#memo(name="memo", placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–¥–µ–ª–∞—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫—É –≤ –•–∞–±–∞—Ä–æ–≤—Å–∫–µ")

    section.form__section
      h3.h3 6. –ó–∞—è–≤–∫—É —Å–æ—Å—Ç–∞–≤–∏–ª
      .form__section-content.control-group.grid12
        .control.control--required.grid12__col.grid12__col.grid12__desktop-col.grid12__desktop-col--6
          label.control__label(for="order-author-fio") –§–ò–û
          input#order-author-fio(type="text", name="order-author-fio", data-suggestion-type="name")
        .control.control--required.grid12__col.grid12__col.grid12__desktop-col.grid12__desktop-col--6
          label.control__label(for="order-author-tel") –¢–µ–ª–µ—Ñ–æ–Ω
          input#order-author-tel(type="tel", name="order-author-tel")
        .control.control--required.grid12__col.grid12__col.grid12__desktop-col.grid12__desktop-col--6
          label.control__label(for="order-author-email") –ï-–º–∞–π–ª
          input#order-author-email(type="email", name="order-author-email", data-suggestion-type="email")

    section.form__section
      h3.h3 7. –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏
      .form__section-content
        ul
          li
            a.link(href="terms.html") –£—Å–ª–æ–≤–∏—è –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≥—Ä—É–∑–æ–≤
          li
            a.link(href="pricing.html") –¢–∞—Ä–∏—Ñ—ã –Ω–∞ –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–∫—É
            p(style="font-size: small;") üî• –° 1 —Ñ–µ–≤—Ä–∞–ª—è 2022 –≥–æ–¥–∞ –¥–µ–π—Å—Ç–≤—É—é—Ç –Ω–æ–≤—ã–µ —Ç–∞—Ä–∏—Ñ—ã

        .control-group
          .control.control--required
            input#accept(type="checkbox", name="accept", value="accept")
            label.control__label(for="accept") –Ø –æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å —É—Å–ª–æ–≤–∏—è–º–∏ –ø–µ—Ä–µ–≤–æ–∑–∫–∏ –≥—Ä—É–∑–æ–≤ –∏ —Ç–∞—Ä–∏—Ñ–∞–º–∏.

        .control-group
          .control.flex.flex-wrap(style="gap: 1ch; justify-content: center; align-items: center;")
            button.max-content.button.button--primary.form__button(type="submit", style="flex-shrink: 0;") –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É
            div
              span –û—Ç–ø—Ä–∞–≤–ª—è—è –∑–∞—è–≤–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–∞—à–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
          .control-group__error-message –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞—è–≤–∫–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞, –∑–∞—è–≤–∫–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞.

block scripts
  script(src="vendor/jquery/jquery.min.js")
  script(src="vendor/suggestions/jquery.suggestions.min.js")
  script(src="vendor/imask/imask.min.js")

  script.
    window.terminals = !{JSON.stringify(tariffs.terminals)};
    window.places = !{JSON.stringify(tariffs.places)};
  script(src="js/order.js")
